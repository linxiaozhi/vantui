"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[3441],{"13441":function(e,n,a){a.r(n),a.d(n,{"taro_movable_view_core":function(){return E}});var l=a(13505),h=a.n(l),u=a(96286),f=a.n(u),d=a(22583),p=a.n(d),v=a(91092),m=a.n(v),g=a(21463),y=a.n(g),x=a(82985),b=a.n(x),S=a(40453),w=a.n(S),M=a(35784),O=a.n(M),T=a(51661),X=a.n(T),Y=a(6087),k=a.n(Y),F=a(57961),V=a.n(F),B=a(47109),__generator=function(e,n){var a,l,u,d,p={"label":0,"sent":function sent(){if(1&u[0])throw u[1];return u[1]},"trys":[],"ops":[]};return d={"next":o(0),"throw":o(1),"return":o(2)},"function"==typeof h()&&(d[f()]=function(){return this}),d;function o(e){return function(n){return c([e,n])}}function c(h){if(a)throw new TypeError("Generator is already executing.");for(;p;)try{if(a=1,l&&(u=2&h[0]?l.return:h[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,h[1])).done)return u;switch(l=0,u&&(h=[2&h[0],u.value]),h[0]){case 0:case 1:u=h;break;case 4:return p.label++,{"value":h[1],"done":!1};case 5:p.label++,l=h[1],h=[0];continue;case 7:h=p.ops.pop(),p.trys.pop();continue;default:if(!(u=p.trys,(u=u.length>0&&u[u.length-1])||6!==h[0]&&2!==h[0])){p=0;continue}if(3===h[0]&&(!u||h[1]>u[0]&&h[1]<u[3])){p.label=h[1];break}if(6===h[0]&&p.label<u[1]){p.label=u[1],u=h;break}if(u&&p.label<u[2]){p.label=u[2],p.ops.push(h);break}u[2]&&p.ops.pop(),p.trys.pop();continue}h=n.call(e,p)}catch(e){h=[6,e],l=0}finally{a=u=0}if(5&h[0])throw h[1];return{"value":h[0]?h[1]:void 0,"done":!0}}},__awaiter=function(e,n,a,l){function i(e){return e instanceof a?e:new a((function(n){n(e)}))}return new(a||(a=p()))((function(a,h){function s(e){try{c(l.next(e))}catch(e){h(e)}}function o(e){try{c(l.throw(e))}catch(e){h(e)}}function c(e){e.done?a(e.value):i(e.value).then(s,o)}c((l=l.apply(e,n||[])).next())}))},E=function(){function t(e){var n=this;(0,B.r)(this,e),this.onChange=(0,B.c)(this,"change",7),this.onScale=(0,B.c)(this,"scale",7),this.onHTouchMove=(0,B.c)(this,"htouchmove",7),this.onVTouchMove=(0,B.c)(this,"vtouchmove",7),this.x=0,this.y=0,this.direction="none",this.outOfBounds=!1,this.inertia=!1,this.friction=2,this.damping=20,this.disabled=!1,this.scale=!1,this.scaleMin=.5,this.scaleMax=10,this.scaleValue=1,this.animation=!0,this.translateX=0,this.translateY=0,this.origin={"x":0,"y":0},this.area={"width":0,"height":0},this.originScale=1,this.currentScale=1,this.width=0,this.height=0,this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.baseX=0,this.baseY=0,this.offset={"x":0,"y":0},this.scaleOffset={"x":0,"y":0},this.getLimitXY=function(e,a){var l=!1;return e>n.maxX?(e=n.maxX,l=!0):e<n.minX&&(e=n.minX,l=!0),a>n.maxY?(a=n.maxY,l=!0):a<n.minY&&(a=n.minY,l=!0),{"x":e,"y":a,"outOfBounds":l}},this.animationTo=function(e,a,l,h,u,f,d){n.animation?(n.setTransform(e,a,l,h,u,f),null==d||d()):n.setTransform(e,a,l,h,u,f)},this.setTransform=function(e,a,l,h,u,f){if(e=Number(e.toFixed(1)),a=Number(a.toFixed(1)),l=Number((null!=l?l:n.currentScale).toFixed(3)),!n.outOfBounds){var d=n.getLimitXY(e,a);e=d.x,a=d.y}var p=function c(e,n){return+((1e3*e-1e3*n)/1e3).toFixed(1)},v=p(e,n.scaleOffset.x),m=p(a,n.scaleOffset.y);n.translateX===e&&n.translateY===a||!u&&n.onChange.emit({"x":v,"y":m,"source":h}),l!==n.currentScale&&f&&n.onScale.emit({"scale":l,"x":v,"y":m});var g="translateX("+e+"px) translateY("+a+"px) translateZ(0px) scale("+l+")";n.element.style.transform=g,n.element.style.webkitTransform=g,n.translateX=e,n.translateY=a,n.currentScale=l},this.updateOffset=function(){if(n.parent){var e=function t(e,n){if(e===n||!e.offsetParent)return{"left":0,"top":0};var a=t(e.offsetParent,n);return{"left":e.offsetLeft+a.left,"top":e.offsetTop+a.top}}(n.element,n.parent);n.offset.x=e.left,n.offset.y=e.top}},this.updateScaleOffset=function(e){void 0===e&&(e=n.currentScale);var a=n.element.getBoundingClientRect();n.height=a.height/n.currentScale,n.width=a.width/n.currentScale,n.scaleOffset.x=(n.width*e-n.width)/2,n.scaleOffset.y=(n.height*e-n.height)/2},this.updateBoundary=function(){var e=0-n.offset.x+n.scaleOffset.x,a=n.area.width-n.width-n.offset.x-n.scaleOffset.x;n.minX=Math.min(e,a),n.maxX=Math.max(e,a);var l=0-n.offset.y+n.scaleOffset.y,h=n.area.height-n.height-n.offset.y-n.scaleOffset.y;n.minY=Math.min(l,h),n.maxY=Math.max(l,h)},this.updateScale=function(e,a,l){if(n.scale){var h=n.adjustScale(e);n.updateScaleOffset(h),n.updateBoundary();var u=n.getLimitXY(n.translateX,n.translateY),f=u.x,d=u.y;a?n.animationTo(f,d,h,"",!0,!0,l):n.updating||(n.updating=!0,requestAnimationFrame((function(){n.setTransform(f,d,h,"",!0,!0),n.updating=!1})))}},this.setOriginScale=function(e){n.originScale=e},this.adjustScale=function(e){return Math.min(10,n.scaleMax,Math.max(.5,n.scaleMin,e))},this.handleTouchStart=function(e){var a=e.touches;if(!(n.disabled||a.length>1)&&n.element){var l=a[0];n.touching=!0,n.firstMoveFireEvent=!1,n.origin.x=l.screenX,n.origin.y=l.screenY,n.baseX=n.translateX,n.baseY=n.translateY,n.element.style.willChange="transform"}},this.handleTouchMove=function(e){var a=e.touches;if(!(n.disabled||!n.element||n.scaling||!n.touching||a.length>1)){e.preventDefault();var l=a[0],h=l.screenX-n.origin.x,u=l.screenY-n.origin.y;if(n.setTransform(n.xMove?h+n.baseX:0,n.yMove?u+n.baseY:0),!n.firstMoveFireEvent)n.firstMoveFireEvent=!0,(Math.abs(h)>Math.abs(u)?n.onHTouchMove:n.onVTouchMove).emit({"originalEvent":e,"bubbles":!1,"capturePhase":!1,"composed":!0,"extraFields":{"touches":e.touches||{},"changedTouches":e.changedTouches||{}}})}},this.handleTouchEnd=function(e){var a=e.changedTouches[0];if(!n.disabled&&n.touching&&a){n.touching=!1;var l=a.screenX-n.origin.x,h=a.screenY-n.origin.y;n.setTransform(n.xMove?l+n.baseX:0,n.yMove?h+n.baseY:0)}}}return t.prototype.watchX=function(e){this.setTransform(m()(""+(e||0)),this.translateY)},t.prototype.watchY=function(e){this.setTransform(this.translateX,m()(""+(e||0)))},t.prototype.watchScaleMinOrMax=function(){if(!this.scale)return!1;this.updateScale(this.currentScale,!0),this.setOriginScale(this.currentScale)},t.prototype.watchScaleValue=function(e){return!!this.scale&&(this.updateScale(e,!0),this.setOriginScale(e),e)},t.prototype.setParent=function(e){var n=e.element,a=e.area;return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(l){return e=this.scale?this.scaleValue:1,this.area=a,this.parent=n,this.updateOffset(),this.updateScaleOffset(e),this.updateBoundary(),this.setTransform(Number(this.x)+this.scaleOffset.x,Number(this.y)+this.scaleOffset.y,e,"",!0),this.setOriginScale(e),[2]}))}))},t.prototype.endScale=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return this.scaling=!1,this.setOriginScale(this.currentScale),[2]}))}))},t.prototype.setScale=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){return this.scale?(this.scaling=!0,this.updateScale(e*this.originScale),[2]):[2]}))}))},t.prototype.connectedCallback=function(){var e=this;this.observer=new MutationObserver((function(n){y()(n).call(n,(function(n){var a,l=n.attributeName;if(l&&b()(a=["class","style"]).call(a,l)){var h=n.oldValue,u=n.target.getAttribute(l);if(h===u)return;var f=function r(e){var n;return null==e?void 0:w()(n=e.split(";")).call(n,(function(e){var n;return!O()(n=["transform","will-change"]).call(n,(function(n){var a;return X()(a=k()(e).call(e)).call(a,n)}))})).join(";")};if("style"===l&&f(u)===f(h))return;e.updateOffset(),e.updateScaleOffset(),e.updateBoundary(),e.setTransform(e.translateX,e.translateY)}}))})),this.observer.observe(this.element,{"attributes":!0,"attributeOldValue":!0})},t.prototype.disconnectedCallback=function(){var e;null===(e=this.observer)||void 0===e||e.disconnect()},t.prototype.componentDidLoad=function(){var e,n;if(this.element.style.transformOrigin="center",this.xMove=b()(e=["horizontal","all"]).call(e,this.direction),this.yMove=b()(n=["vertical","all"]).call(n,this.direction),this.friction<=0&&(this.friction=2),this.x||this.y){var a=m()(""+(this.x||0)),l=m()(""+(this.y||0));this.setTransform(a,l)}},t.prototype.render=function(){return(0,B.h)(B.H,{"onTouchStart":this.handleTouchStart,"onTouchMove":this.handleTouchMove,"onTouchEnd":this.handleTouchEnd})},V()(t.prototype,"element",{"get":function get(){return(0,B.g)(this)},"enumerable":!1,"configurable":!0}),V()(t,"watchers",{"get":function get(){return{"x":["watchX"],"y":["watchY"],"scaleMin":["watchScaleMinOrMax"],"scaleMax":["watchScaleMinOrMax"],"scaleValue":["watchScaleValue"]}},"enumerable":!1,"configurable":!0}),t}();E.style="taro-movable-view-core{display:inline-block;position:absolute;left:0;top:0;width:10px;height:10px}"}}]);